# Green-API Autotests

![Tests](https://img.shields.io/badge/tests-9%20passed%20‚úÖ-brightgreen)
![TypeScript](https://img.shields.io/badge/TypeScript-5.3-blue)
![Jest](https://img.shields.io/badge/Jest-29.7-purple)
![Selenium](https://img.shields.io/badge/Selenium-4.15-orange)

–ê–≤—Ç–æ—Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π WhatsApp —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å [GREEN-API](https://green-api.com/). –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ QA Engineer.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **API —Ç–µ—Å—Ç—ã**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è Green-API
- **Selenium UI —Ç–µ—Å—Ç—ã**: –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ WhatsApp Web (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **TypeScript**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- **Jest**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [x] –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ GREEN-API
- [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
- [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Jest + TypeScript
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤ 200 –∏ 400
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞
- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- [x] Selenium —Ç–µ—Å—Ç—ã –¥–ª—è UI WhatsApp Web
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [x] –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞



green-api-autotests/<br>
‚îú‚îÄ‚îÄ src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥<br>
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API –º–µ—Ç–æ–¥—ã Green-API<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sendMessage.ts<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ getChatHistory.ts<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ getStateInstance.ts<br>
‚îÇ   ‚îú‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.ts<br>
‚îÇ   ‚îî‚îÄ‚îÄ types/             # TypeScript —Ç–∏–ø—ã<br>
‚îÇ       ‚îî‚îÄ‚îÄ types.ts<br>
‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã<br>
‚îÇ   ‚îú‚îÄ‚îÄ sendMessage.test.ts<br>
‚îÇ   ‚îú‚îÄ‚îÄ getChatHistory.test.ts<br>
‚îÇ   ‚îú‚îÄ‚îÄ getStateInstance.test.ts<br>
‚îÇ   ‚îî‚îÄ‚îÄ selenium/          # UI —Ç–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)<br>
‚îÇ       ‚îú‚îÄ‚îÄ basic.test.ts<br>
‚îÇ       ‚îú‚îÄ‚îÄ smoke.test.ts<br>
‚îÇ       ‚îî‚îÄ‚îÄ greenapi.test.ts<br>
‚îú‚îÄ‚îÄ package.json<br>
‚îú‚îÄ‚îÄ tsconfig.json<br>
‚îú‚îÄ‚îÄ jest.config.js<br>
‚îî‚îÄ‚îÄ README.md<br>



## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
bash
git clone https://github.com/vagap85/green-api-autotests.git
cd green-api-autotests
npm install


2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

env
# GREEN-API 
ID_INSTANCE=your_id_instance_here<br>
API_TOKEN_INSTANCE=your_api_token_instance_here<br>
BASE_URL=https://7103.api.green-api.com<br>
CHAT_ID=79991234567@c.us<br>
#Selenium (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
HEADLESS=true


3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

bash
#–í—Å–µ —Ç–µ—Å—Ç—ã
npm test

#–¢–æ–ª—å–∫–æ API —Ç–µ—Å—Ç—ã
npm run test:api

#–¢–æ–ª—å–∫–æ Selenium —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É—é—Ç QR-–∫–æ–¥)
npm run test:selenium

#Selenium —Å –≤–∏–¥–∏–º—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º
npm run test:selenium:headed


üîß API –º–µ—Ç–æ–¥—ã

sendMessage

–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Green-API

typescript
const response = await sendMessage({
    chatId: "79991234567@c.us",
    message: "Test message"
});


getChatHistory

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞

typescript
const history = await getChatHistory("79991234567@c.us");


getStateInstance

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞

typescript
const state = await getStateInstance();


üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

API —Ç–µ—Å—Ç—ã (9 —Ç–µ—Å—Ç–æ–≤)

bash
npm run test:api


–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:

¬∑ ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (—Å—Ç–∞—Ç—É—Å—ã 200, 400)<br>
¬∑ ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞<br>
¬∑ ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞<br>
¬∑ ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π<br>
¬∑ ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫<br>

Selenium —Ç–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

bash
npm run test:selenium


–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: Selenium —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–∞ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ WhatsApp Web.

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

API —Ç–µ—Å—Ç—ã 9 –∏–∑ 9 ‚úÖ <br>
Selenium —Ç–µ—Å—Ç—ã 0 –∏–∑ 3*<br>
*Selenium —Ç–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –∏–∑-–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ QR-–∫–æ–¥–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Green-API

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ Green-API<br>
2. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Å—Ç–∞–Ω—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ<br>
3. –ü–æ–ª—É—á–∏—Ç–µ idInstance –∏ apiTokenInstance<br>
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ —Ñ–∞–π–ª–µ .env<br>

üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

¬∑ Jest - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è<br>
¬∑ TypeScript - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è<br>
¬∑ Selenium WebDriver - UI –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è<br>
¬∑ Axios - HTTP –∫–ª–∏–µ–Ω—Ç<br>
¬∑ Green-API - WhatsApp API<br>

üìù –°–∫—Ä–∏–ø—Ç—ã package.json

json
{
  "scripts": {
    "test": "jest",
    "test:api": "jest tests/sendMessage.test.ts tests/getChatHistory.test.ts tests/getStateInstance.test.ts",
    "test:selenium": "jest tests/selenium",
    "test:selenium:headed": "set HEADLESS=false&& jest tests/selenium"
  }
}


ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

bash
npm install


–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

bash
npm run build


üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

üë§ –ê–≤—Ç–æ—Ä

Evgeny Agapov

¬∑ Email: vagap85@gmail.com<br>
¬∑ GitHub: @vagap85

